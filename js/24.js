(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[24],{

/***/ "./node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js?!./node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js?!./src/views/container/PodWebSSH.vue?vue&type=script&lang=js&":
/*!***************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!./node_modules/_vue-loader@15.9.7@vue-loader/lib??vue-loader-options!./src/views/container/PodWebSSH.vue?vue&type=script&lang=js& ***!
  \***************************************************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var xterm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! xterm */ \"./node_modules/_xterm@4.12.0@xterm/lib/xterm.js\");\n/* harmony import */ var xterm__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(xterm__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var xterm_addon_fit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! xterm-addon-fit */ \"./node_modules/_xterm-addon-fit@0.4.0@xterm-addon-fit/lib/xterm-addon-fit.js\");\n/* harmony import */ var xterm_addon_fit__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(xterm_addon_fit__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var xterm_addon_attach__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! xterm-addon-attach */ \"./node_modules/_xterm-addon-attach@0.6.0@xterm-addon-attach/lib/xterm-addon-attach.js\");\n/* harmony import */ var xterm_addon_attach__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(xterm_addon_attach__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var xterm_addon_web_links__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! xterm-addon-web-links */ \"./node_modules/_xterm-addon-web-links@0.4.0@xterm-addon-web-links/lib/xterm-addon-web-links.js\");\n/* harmony import */ var xterm_addon_web_links__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(xterm_addon_web_links__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var xterm_css_xterm_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! xterm/css/xterm.css */ \"./node_modules/_xterm@4.12.0@xterm/css/xterm.css\");\n/* harmony import */ var xterm_css_xterm_css__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(xterm_css_xterm_css__WEBPACK_IMPORTED_MODULE_4__);\n//\n//\n//\n//\n//\n//\n//\n//\n\n \n \n \n \n\n \t\t\t//这个特别重要,一定要在开头就引入css,否则可能会导致样式错误\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: \"PodWebSSH\",\n  data (){\n    return {\n      pod_name: null,\n      namespace: null,\n      socket: '',\n      term: null,\n    }\n  },\n  methods: {\n    webssh() {\n\t    //实例化终端并设置参数\n      const _this = this\n      _this.term = new xterm__WEBPACK_IMPORTED_MODULE_0__[\"Terminal\"]({\n        rendererType: \"canvas\", //渲染类型\n        //cols: 92,\n        rows: 500,\n        convertEol: true, //启用时，光标将设置为下一行的开头\n        scrollback: 20, //终端中的回滚量\n        disableStdin: false, //是否应禁用输入\n        cursorStyle: \"underline\", //光标样式 null | 'block' | 'underline' | 'bar'\n        cursorBlink: true, //光标闪烁\n        theme: {\n          // foreground: \"yellow\", //字体\n          // background: \"#060101\", //背景色\n          cursor: \"help\" //设置光标\n        }})\n\t    //加载自适应组件\n      _this.fitAddon = new xterm_addon_fit__WEBPACK_IMPORTED_MODULE_1__[\"FitAddon\"]();\n      _this.term.loadAddon(this.fitAddon);\n\t    //加载weblink组件\n      _this.term.loadAddon(new xterm_addon_web_links__WEBPACK_IMPORTED_MODULE_3__[\"WebLinksAddon\"]());\n      //在绑定的组件上初始化窗口\n      _this.term.open(this.$refs.terminal);\n      //窗口初始化后,按照浏览器窗口自适应大小\n      _this.fitAddon.fit();\n      //聚焦\n      _this.term.focus();\n      //创建ws实例  'ws://' + 'pigs.vaiwan.com' + '/ws/pod/' + this.pod_name\n      //这里还把窗口的column和row传入后端,使其能自动针对前端窗口边框改为输出\n      const wsProtocol = window.location.protocol === \"https:\" ? \"wss\" : \"ws\"\n      const host = window.location.host\n      const token = localStorage.getItem('token');\n      _this.socket = new WebSocket(`${wsProtocol}://${host}/ws/pod/${this.namespace}/${this.pod_name}/${this.term.cols}/${this.term.rows}?token=${token}`);\n      //xterm的socket组件与websocket实例结合\n      const attachAddon = new xterm_addon_attach__WEBPACK_IMPORTED_MODULE_2__[\"AttachAddon\"](this.socket);\n      _this.term.loadAddon(attachAddon);\n      _this.term.write(\"\\n\"+\"\\n\" )\n      _this.term.write(\"欢迎使用, 请谨慎操作！\"+\"\\n\\n\")\n       //监听resize,当窗口拖动的时候,监听事件,实时改变xterm窗口\n      window.addEventListener('resize', this.debounce(this.resizeScreen,1500), false);\n      _this.socket.onclose = function (event) {\n        _this.term.write('\\n\\r\\x1B[1;3;31m连接已关闭,请刷新页面.\\x1B[0m');\n       //this.term.destroy();\n      };\n    },\n    //节流,避免拖动时候频繁向后端请求更新\n    debounce(fn, wait) {\n      let timeout = null;\n      return function() {\n        if(timeout !== null) clearTimeout(timeout);\n        timeout = setTimeout(fn, wait);\n      }\n    },\n    //页面重新resize的时候,需要重新告诉后端cols和rows\n    resizeScreen(){\n    //对xterm的窗口重新fit,获取新的cols和rows\n      this.fitAddon.fit();\n      this.socket.send(JSON.stringify([this.term.cols,this.term.rows]));\n    }\n\n\n\n  },\n  mounted() {\n    this.pod_name = this.$route.query.pod_name\n    this.namespace = this.$route.query.namespace\n    this.webssh()\n    // this.socket.onclose = function (event) {\n    //   console.log(event,456789, _this.term)\n    //   _this.term.write('\\n\\r\\x1B[1;3;31msocket is already closed.\\x1B[0m');\n    //   //this.term.destroy();\n    // };\n  },\n  // beforeDestroy () {\n  //   this.socket.close()\n  //   this.term.destroy()\n  // }\n});\n\n\n\n\n\n\n//# sourceURL=webpack:///./src/views/container/PodWebSSH.vue?./node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!./node_modules/_vue-loader@15.9.7@vue-loader/lib??vue-loader-options");

/***/ }),

/***/ "./node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/.cache/vue-loader\",\"cacheIdentifier\":\"1b0c02bd-vue-loader-template\"}!./node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/templateLoader.js?!./node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js?!./node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js?!./src/views/container/PodWebSSH.vue?vue&type=template&id=3d2924e1&scoped=true&":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"1b0c02bd-vue-loader-template"}!./node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!./node_modules/_vue-loader@15.9.7@vue-loader/lib??vue-loader-options!./src/views/container/PodWebSSH.vue?vue&type=template&id=3d2924e1&scoped=true& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"render\", function() { return render; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"staticRenderFns\", function() { return staticRenderFns; });\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticStyle: { width: \"100%\", height: \"100%\" } }, [\n    _c(\"div\", {\n      ref: \"terminal\",\n      staticStyle: { height: \"700px\" },\n      attrs: { id: \"terminal\" }\n    })\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\n\n\n//# sourceURL=webpack:///./src/views/container/PodWebSSH.vue?./node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js?%7B%22cacheDirectory%22:%22node_modules/.cache/vue-loader%22,%22cacheIdentifier%22:%221b0c02bd-vue-loader-template%22%7D!./node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!./node_modules/_vue-loader@15.9.7@vue-loader/lib??vue-loader-options");

/***/ }),

/***/ "./src/views/container/PodWebSSH.vue":
/*!*******************************************!*\
  !*** ./src/views/container/PodWebSSH.vue ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _PodWebSSH_vue_vue_type_template_id_3d2924e1_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PodWebSSH.vue?vue&type=template&id=3d2924e1&scoped=true& */ \"./src/views/container/PodWebSSH.vue?vue&type=template&id=3d2924e1&scoped=true&\");\n/* harmony import */ var _PodWebSSH_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PodWebSSH.vue?vue&type=script&lang=js& */ \"./src/views/container/PodWebSSH.vue?vue&type=script&lang=js&\");\n/* empty/unused harmony star reexport *//* harmony import */ var _node_modules_vue_loader_15_9_7_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/runtime/componentNormalizer.js */ \"./node_modules/_vue-loader@15.9.7@vue-loader/lib/runtime/componentNormalizer.js\");\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(_node_modules_vue_loader_15_9_7_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\n  _PodWebSSH_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n  _PodWebSSH_vue_vue_type_template_id_3d2924e1_scoped_true___WEBPACK_IMPORTED_MODULE_0__[\"render\"],\n  _PodWebSSH_vue_vue_type_template_id_3d2924e1_scoped_true___WEBPACK_IMPORTED_MODULE_0__[\"staticRenderFns\"],\n  false,\n  null,\n  \"3d2924e1\",\n  null\n  \n)\n\n/* hot reload */\nif (false) { var api; }\ncomponent.options.__file = \"src/views/container/PodWebSSH.vue\"\n/* harmony default export */ __webpack_exports__[\"default\"] = (component.exports);\n\n//# sourceURL=webpack:///./src/views/container/PodWebSSH.vue?");

/***/ }),

/***/ "./src/views/container/PodWebSSH.vue?vue&type=script&lang=js&":
/*!********************************************************************!*\
  !*** ./src/views/container/PodWebSSH.vue?vue&type=script&lang=js& ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_cache_loader_4_1_0_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_9_7_vue_loader_lib_index_js_vue_loader_options_PodWebSSH_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib??vue-loader-options!./PodWebSSH.vue?vue&type=script&lang=js& */ \"./node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js?!./node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js?!./src/views/container/PodWebSSH.vue?vue&type=script&lang=js&\");\n/* empty/unused harmony star reexport */ /* harmony default export */ __webpack_exports__[\"default\"] = (_node_modules_cache_loader_4_1_0_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_9_7_vue_loader_lib_index_js_vue_loader_options_PodWebSSH_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[\"default\"]); \n\n//# sourceURL=webpack:///./src/views/container/PodWebSSH.vue?");

/***/ }),

/***/ "./src/views/container/PodWebSSH.vue?vue&type=template&id=3d2924e1&scoped=true&":
/*!**************************************************************************************!*\
  !*** ./src/views/container/PodWebSSH.vue?vue&type=template&id=3d2924e1&scoped=true& ***!
  \**************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_cache_loader_4_1_0_cache_loader_dist_cjs_js_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_1b0c02bd_vue_loader_template_node_modules_vue_loader_15_9_7_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_4_1_0_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_9_7_vue_loader_lib_index_js_vue_loader_options_PodWebSSH_vue_vue_type_template_id_3d2924e1_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js?{\"cacheDirectory\":\"node_modules/.cache/vue-loader\",\"cacheIdentifier\":\"1b0c02bd-vue-loader-template\"}!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.7@vue-loader/lib??vue-loader-options!./PodWebSSH.vue?vue&type=template&id=3d2924e1&scoped=true& */ \"./node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"1b0c02bd-vue-loader-template\\\"}!./node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/templateLoader.js?!./node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js?!./node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js?!./src/views/container/PodWebSSH.vue?vue&type=template&id=3d2924e1&scoped=true&\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"render\", function() { return _node_modules_cache_loader_4_1_0_cache_loader_dist_cjs_js_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_1b0c02bd_vue_loader_template_node_modules_vue_loader_15_9_7_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_4_1_0_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_9_7_vue_loader_lib_index_js_vue_loader_options_PodWebSSH_vue_vue_type_template_id_3d2924e1_scoped_true___WEBPACK_IMPORTED_MODULE_0__[\"render\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"staticRenderFns\", function() { return _node_modules_cache_loader_4_1_0_cache_loader_dist_cjs_js_cacheDirectory_node_modules_cache_vue_loader_cacheIdentifier_1b0c02bd_vue_loader_template_node_modules_vue_loader_15_9_7_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_cache_loader_4_1_0_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_9_7_vue_loader_lib_index_js_vue_loader_options_PodWebSSH_vue_vue_type_template_id_3d2924e1_scoped_true___WEBPACK_IMPORTED_MODULE_0__[\"staticRenderFns\"]; });\n\n\n\n//# sourceURL=webpack:///./src/views/container/PodWebSSH.vue?");

/***/ })

}]);